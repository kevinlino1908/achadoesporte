const kitsData = [
  {
    "id": 1,
    "team": "Flamengo",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Adidas",
        "image": "https://commons.wikimedia.org/wiki/File:Flamengo_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Adidas",
        "image": "https://commons.wikimedia.org/wiki/File:Flamengo_2025_away_kit.jpg"
      },
      {
        "type": "third",
        "brand": "Adidas",
        "image": "https://commons.wikimedia.org/wiki/File:Flamengo_2025_third_kit.jpg"
      }
    ],
    "prices": {
      "home": 299.9,
      "away": 299.9,
      "third": 319.9
    }
  },
  {
    "id": 2,
    "team": "Palmeiras",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:Palmeiras_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:Palmeiras_2025_away_kit.jpg"
      },
      {
        "type": "third",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:Palmeiras_2025_third_kit.jpg"
      }
    ],
    "prices": {
      "home": 289.9,
      "away": 289.9,
      "third": 309.9
    }
  },
  {
    "id": 3,
    "team": "Cruzeiro",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Adidas",
        "image": "https://commons.wikimedia.org/wiki/File:Cruzeiro_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Adidas",
        "image": "https://commons.wikimedia.org/wiki/File:Cruzeiro_2025_away_kit.jpg"
      },
      {
        "type": "third",
        "brand": "Adidas",
        "image": "https://commons.wikimedia.org/wiki/File:Cruzeiro_2025_third_kit.jpg"
      }
    ],
    "prices": {
      "home": 279.9,
      "away": 279.9,
      "third": 299.9
    }
  },
  {
    "id": 4,
    "team": "São Paulo FC",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "New Balance",
        "image": "https://commons.wikimedia.org/wiki/File:S%C3%A3o_Paulo_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "New Balance",
        "image": "https://commons.wikimedia.org/wiki/File:S%C3%A3o_Paulo_2025_away_kit.jpg"
      },
      {
        "type": "third",
        "brand": "New Balance",
        "image": "https://commons.wikimedia.org/wiki/File:S%C3%A3o_Paulo_2025_third_kit.jpg"
      }
    ],
    "prices": {
      "home": 269.9,
      "away": 269.9,
      "third": 289.9
    }
  },
  {
    "id": 5,
    "team": "Corinthians",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Nike",
        "image": "https://commons.wikimedia.org/wiki/File:Corinthians_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Nike",
        "image": "https://commons.wikimedia.org/wiki/File:Corinthians_2025_away_kit.jpg"
      },
      {
        "type": "third",
        "brand": "Nike",
        "image": "https://commons.wikimedia.org/wiki/File:Corinthians_2025_third_kit.jpg"
      }
    ],
    "prices": {
      "home": 279.9,
      "away": 279.9,
      "third": 299.9
    }
  },
  {
    "id": 6,
    "team": "Grêmio",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Umbro",
        "image": "https://commons.wikimedia.org/wiki/File:Gr%C3%AAmio_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Umbro",
        "image": "https://commons.wikimedia.org/wiki/File:Gr%C3%AAmio_2025_away_kit.jpg"
      },
      {
        "type": "third",
        "brand": "Umbro",
        "image": "https://commons.wikimedia.org/wiki/File:Gr%C3%AAmio_2025_third_kit.jpg"
      }
    ],
    "prices": {
      "home": 259.9,
      "away": 259.9,
      "third": 279.9
    }
  },
  {
    "id": 7,
    "team": "Internacional",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Adidas",
        "image": "https://commons.wikimedia.org/wiki/File:Internacional_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Adidas",
        "image": "https://commons.wikimedia.org/wiki/File:Internacional_2025_away_kit.jpg"
      },
      {
        "type": "third",
        "brand": "Adidas",
        "image": "https://commons.wikimedia.org/wiki/File:Internacional_2025_third_kit.jpg"
      }
    ],
    "prices": {
      "home": 269.9,
      "away": 269.9,
      "third": 289.9
    }
  },
  {
    "id": 8,
    "team": "Bahia",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:Bahia_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:Bahia_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 249.9,
      "away": 249.9
    }
  },
  {
    "id": 9,
    "team": "Botafogo",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Reebok",
        "image": "https://commons.wikimedia.org/wiki/File:Botafogo_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Reebok",
        "image": "https://commons.wikimedia.org/wiki/File:Botafogo_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 259.9,
      "away": 259.9
    }
  },
  {
    "id": 10,
    "team": "Red Bull Bragantino",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:RB_Bragantino_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:RB_Bragantino_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 249.9,
      "away": 249.9
    }
  },
  {
    "id": 11,
    "team": "Atlético Mineiro",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Nike",
        "image": "https://commons.wikimedia.org/wiki/File:Atl%C3%A9tico_MG_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Nike",
        "image": "https://commons.wikimedia.org/wiki/File:Atl%C3%A9tico_MG_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 269.9,
      "away": 269.9
    }
  },
  {
    "id": 12,
    "team": "Athletico Paranaense",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Umbro",
        "image": "https://commons.wikimedia.org/wiki/File:Athletico_PR_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Umbro",
        "image": "https://commons.wikimedia.org/wiki/File:Athletico_PR_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 249.9,
      "away": 249.9
    }
  },
  {
    "id": 13,
    "team": "Coritiba",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Diadora",
        "image": "https://commons.wikimedia.org/wiki/File:Coritiba_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Diadora",
        "image": "https://commons.wikimedia.org/wiki/File:Coritiba_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 229.9,
      "away": 229.9
    }
  },
  {
    "id": 14,
    "team": "Chapecoense",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Kappa",
        "image": "https://commons.wikimedia.org/wiki/File:Chapecoense_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Kappa",
        "image": "https://commons.wikimedia.org/wiki/File:Chapecoense_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 229.9,
      "away": 229.9
    }
  },
  {
    "id": 15,
    "team": "Mirassol",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Athleta",
        "image": "https://commons.wikimedia.org/wiki/File:Mirassol_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Athleta",
        "image": "https://commons.wikimedia.org/wiki/File:Mirassol_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 219.9,
      "away": 219.9
    }
  },
  {
    "id": 16,
    "team": "Vasco da Gama",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Kappa",
        "image": "https://commons.wikimedia.org/wiki/File:Vasco_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Kappa",
        "image": "https://commons.wikimedia.org/wiki/File:Vasco_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 239.9,
      "away": 239.9
    }
  },
  {
    "id": 17,
    "team": "Vitória",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Volt Sport",
        "image": "https://commons.wikimedia.org/wiki/File:Vit%C3%B3ria_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Volt Sport",
        "image": "https://commons.wikimedia.org/wiki/File:Vit%C3%B3ria_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 219.9,
      "away": 219.9
    }
  },
  {
    "id": 18,
    "team": "Sport Recife",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Umbro",
        "image": "https://commons.wikimedia.org/wiki/File:Sport_Recife_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Umbro",
        "image": "https://commons.wikimedia.org/wiki/File:Sport_Recife_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 229.9,
      "away": 229.9
    }
  },
  {
    "id": 19,
    "team": "Bahia FC",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:Bahia_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:Bahia_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 249.9,
      "away": 249.9
    }
  },
  {
    "id": 20,
    "team": "Esporte Clube Bahia",
    "season": "2025",
    "kits": [
      {
        "type": "home",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:Bahia_2025_home_kit.jpg"
      },
      {
        "type": "away",
        "brand": "Puma",
        "image": "https://commons.wikimedia.org/wiki/File:Bahia_2025_away_kit.jpg"
      }
    ],
    "prices": {
      "home": 249.9,
      "away": 249.9
    }
  }
];

const botoesFiltro = document.querySelectorAll('.filtro');
const gridKits = document.querySelector('#kits-grid');

const formatarTipo = (tipo) => tipo.charAt(0).toUpperCase() + tipo.slice(1);
const formatarPreco = (preco) =>
  preco.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

const resolverImagem = (url) => {
  if (!url.includes('/wiki/File:')) return url;
  const nomeArquivo = url.split('/wiki/File:')[1];
  return `https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(nomeArquivo)}`;
};

const criarPlaceholderImagem = (time, tipo, temporada) => {
  const titulo = `${time} • ${formatarTipo(tipo)} ${temporada}`;
  const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='640' height='420'>    <defs><linearGradient id='g' x1='0' x2='1' y1='0' y2='1'>      <stop offset='0%' stop-color='#111827'/>      <stop offset='100%' stop-color='#1f2937'/>    </linearGradient></defs>    <rect width='100%' height='100%' fill='url(#g)'/>    <text x='50%' y='46%' dominant-baseline='middle' text-anchor='middle' fill='#86efac' font-family='Inter,Arial,sans-serif' font-size='32' font-weight='700'>Camisa indisponível</text>    <text x='50%' y='58%' dominant-baseline='middle' text-anchor='middle' fill='#cbd5e1' font-family='Inter,Arial,sans-serif' font-size='22'>${titulo}</text>  </svg>`;
  return `data:image/svg+xml;utf8,${encodeURIComponent(svg)}`;
};

const renderizarCards = () => {
  const cardsHtml = kitsData
    .flatMap((item) =>
      item.kits.map((kit) => {
        const preco = item.prices[kit.type];

        return `
          <article class="card" data-type="${kit.type}">
            <img class="card-image" src="${resolverImagem(kit.image)}" alt="Camisa ${formatarTipo(kit.type)} ${item.team} ${item.season}" loading="lazy" referrerpolicy="no-referrer" onerror="this.onerror=null;this.src='${criarPlaceholderImagem(item.team, kit.type, item.season)}'" />
            <span class="badge">${formatarTipo(kit.type)}</span>
            <h3>${item.team} ${formatarTipo(kit.type)} ${item.season}</h3>
            <p class="descricao">Marca: ${kit.brand}</p>
            <p class="preco">${formatarPreco(preco)}</p>
            <a href="https://www.instagram.com/achadoesporte/" target="_blank" rel="noreferrer">Ver oferta</a>
          </article>
        `;
      })
    )
    .join('');

  gridKits.innerHTML = cardsHtml;
};

const aplicarFiltro = (tipo) => {
  const cards = document.querySelectorAll('.card');

  cards.forEach((card) => {
    const tipoCard = card.dataset.type;
    const exibir = tipo === 'all' || tipoCard === tipo;
    card.style.display = exibir ? 'flex' : 'none';
  });
};

botoesFiltro.forEach((botao) => {
  botao.addEventListener('click', () => {
    const tipo = botao.dataset.filter;

    botoesFiltro.forEach((item) => item.classList.remove('ativo'));
    botao.classList.add('ativo');

    aplicarFiltro(tipo);
  });
});

renderizarCards();
